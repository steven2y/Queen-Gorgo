// Generated by CoffeeScript 1.4.0
(function() {

  $(document).ready(function() {
    var app, displayModel, win, _log, _s_log;
    _.templateSettings = {
      interpolate: /\{\{(.+?)\}\}/g
    };
    app = {};
    displayModel = {};
    win = $(window);
    app.server = io.connect("/");
    console.log("Loading");
    _log = function(message) {
      return console.log(message);
    };
    _s_log = function(o) {
      console.log(JSON.stringify(o));
      return {
        welcome: "<h1>" + message + "</h1>",
        user: "<div #user>{{userName}}</div>"
      };
    };
    app.server.on("connect", function() {
      _log("Connected to the server" + arguments);
      displayModel.timestamp = new Date().getTime();
      $("h1").text("display " + displayModel.timestamp);
      displayModel.height = win.height();
      displayModel.width = win.width();
      app.server.emit("displayRegister", displayModel);
      app.server.on("message", function(data) {
        return _log("Received message: " + data.message);
      });
      return app.server.on("overlayMessage", function(data) {
        return $("#overlay").empty().text(data.message).addClass('show').css("font-size", $(window).height() + "px");
      });
    });
    $(window).resize(function() {
      $("#overlay").css("font-size", $(window).height() + "px");
      displayModel.height = win.height();
      displayModel.width = win.width();
      app.server.emit("displayUpdate", displayModel);
      return console.log(displayModel);
    });
    return window.app = app;
  });

}).call(this);
